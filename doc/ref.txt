check out the complex 'prior art' for our format here
https://github.com/mamedev/mame/blob/bcd0656824540c60a8c24d023d10e19e2f60e795/src/lib/util/chd.h

put a list of codecs to study here
http://spin.atomicobject.com/2013/03/14/heatshrink-embedded-data-compression/
https://code.google.com/p/lz4/